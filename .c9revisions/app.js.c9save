{"ts":1351878207430,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var request = new XMLHttpRequest();\nrequest.open('GET', '/stream/stream_chunk', true);\nrequest.responseType = 'arraybuffer';\n\nrequest.onload = function(oEvent) {\n    var arrayBuffer = request.response;\n    if (arrayBuffer) {\n        var byteArray = new Uint8Array(arrayBuffer);\n        for (var i = 0; i < byteArray.byteLength; i++) {\n            // do something with each byte in the array\n            console.log(byteArray[i]);\n        }\n    }\n};\n\nrequest.send(null);"]],"start1":0,"start2":0,"length1":0,"length2":469}]],"length":469}
{"contributors":[],"silentsave":false,"ts":1351879000361,"patch":[[{"diffs":[[1,"var request = new XMLHttpRequest();\n\n// The actual image\nvar imageBytes = new Uint8Array();\n\n// The chars at the end of the image\nvar endPos = \"\\n--myboundary\";\n\n// Started to find, finished finding\nvar done = false;\nvar started = false;\n\n// Don't know why I have to save these to a ByteArray to do the comparisons but it seems I do\nvar startBytes = new Uint8Array();\nvar startByte = 0xFF;\nvar secondByte = 0xD8;\n\nstartBytes.push(0xFF);\nstartBytes.push(0xD8);\n\n\nvar startNum = startBytes[0];\nvar nextNum = startBytes[1];\n\n// Open the stream\n"],[0,"var request "]],"start1":0,"start2":0,"length1":12,"length2":553},{"diffs":[[0,"uffer';\n"],[-1,"\n"],[0,"request."]],"start1":658,"start2":658,"length1":17,"length2":16},{"diffs":[[0,"d = "],[-1,"function(oE"],[1,"progressHandler;\nrequest.send(null);\n\nfunction progressHandler(e"],[0,"vent) {\n"],[1,"    \n"],[0,"    var "],[-1,"array"],[1,"mjpeg"],[0,"Buff"]],"start1":679,"start2":679,"length1":40,"length2":98},{"diffs":[[0,"    "],[-1,"if (array"],[1,"\n    if (mjpeg"],[0,"Buff"]],"start1":800,"start2":800,"length1":17,"length2":22},{"diffs":[[0,"t8Array("],[-1,"array"],[1,"mjpeg"],[0,"Buffer);"]],"start1":859,"start2":859,"length1":21,"length2":21},{"diffs":[[0,"    "],[-1,"// do something with each byte in the array\n"],[1,"\n            var currentByte = mjpegBuffer[i];\n            var nextByte = mjpegBuffer[i + 1];\n            var thirdByte = mjpegBuffer[i + 2];\n            var fourthByte = mjpegBuffer[i + 3];\n            \n            \n            if (!started) {\n                if (currentByte == startNum && nextByte == nextNum) {\n    "],[0,"    "]],"start1":946,"start2":946,"length1":52,"length2":327},{"diffs":[[0,"        "],[1,"    "],[0,"console."]],"start1":1273,"start2":1273,"length1":16,"length2":20},{"diffs":[[0,"log("],[-1,"byteArray[i]);\n"],[1,"'Started');\n                    started = true;\n                    imageBytes = new Uint8Array();\n                    imageBytes.push(currentByte);\n     "],[0,"        "],[1,"   "],[0,"}\n    "],[-1,"}\n};\n\nrequest.send(null);"],[1,"        }\n            else {\n                if (currentByte == endPos.charCodeAt(0) && nextByte == endPos.charCodeAt(1) && thirdByte == endPos.charCodeAt(2) && fourthByte == endPos.charCodeAt(3)) {\n                    console.log('done');\n                    done = true;\n                    started = false;\n    \n                    console.log(imageBytes);\n                }\n                else {\n                    imageBytes.push(currentByte);\n                }\n            }\n        }\n    }\n}\n\n\n\n\n\n\n\n"]],"start1":1293,"start2":1293,"length1":58,"length2":683}]],"length":1976,"saved":false}
{"ts":1351879233497,"patch":[[{"diffs":[[0,"Bytes = "],[-1,"new Uint8Array()"],[1,"[]"],[0,";\n\n// Th"]],"start1":66,"start2":66,"length1":32,"length2":18},{"diffs":[[0,"Bytes = "],[-1,"new Uint8Array()"],[1,"[]"],[0,";\nvar st"]],"start1":328,"start2":328,"length1":32,"length2":18},{"diffs":[[0,"s = "],[-1,"new Uint8Array()"],[1,"[]"],[0,";\n  "]],"start1":1346,"start2":1346,"length1":24,"length2":10}]],"length":1934,"saved":false}
{"ts":1351879260086,"patch":[[{"diffs":[[0,"'GET', '"],[-1,"/"],[0,"stream/s"]],"start1":562,"start2":562,"length1":17,"length2":16}]],"length":1933,"saved":false}
{"ts":1351879314514,"patch":[[{"diffs":[[0,"ent) {\n    \n"],[1,"    console.log('running');\n    \n"],[0,"    var mjpe"]],"start1":719,"start2":719,"length1":24,"length2":57},{"diffs":[[0,"t.response;\n"],[-1,""],[0,"    \n    if "]],"start1":792,"start2":792,"length1":24,"length2":24},{"diffs":[[0,"le.log('"],[-1,"S"],[1,"s"],[0,"tarted')"]],"start1":1294,"start2":1294,"length1":17,"length2":17},{"diffs":[[0,"ed = false;\n"],[-1,""],[0,"    \n"],[1,"                    // got image data\n"],[0,"            "]],"start1":1756,"start2":1756,"length1":29,"length2":67}]],"length":2004,"saved":false}
{"ts":1351879324897,"patch":[[{"diffs":[[0," // got "],[-1,"image"],[1,"JPG"],[0," data\n  "]],"start1":1792,"start2":1792,"length1":21,"length2":19}]],"length":2002,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351879444486,"patch":[[{"diffs":[[1,"console.log('init');\n\n"],[0,"var request = new XMLHttpReq"]],"start1":0,"start2":0,"length1":28,"length2":50},{"diffs":[[0,"d = "],[-1,"progressHandler;\nrequest.send(null);\n\nfunction progressHandler"],[1,"function"],[0,"(eve"]],"start1":672,"start2":672,"length1":70,"length2":16},{"diffs":[[0,"\n    }\n}"],[-1,"\n\n\n\n\n\n"],[1,";\n\nrequest.send(null);"],[0,"\n\n"]],"start1":1954,"start2":1954,"length1":16,"length2":32}]],"length":1986,"saved":false}
{"ts":1351879602515,"patch":[[{"diffs":[[0,"t.on"],[-1,"load"],[1,"progress"],[0," = f"]],"start1":665,"start2":665,"length1":12,"length2":16},{"diffs":[[0,"function"],[1," updateProgress(event) {\n    if (event.lengthComputable) {\n        var percentComplete = (event.loaded / event.total) * 100;\n        console.log('Loading: ' + percentComplete + '%');\n    }\n};\nrequest.onload = function"],[0,"(event) "]],"start1":680,"start2":680,"length1":16,"length2":233},{"diffs":[[0,"vent) {\n"],[-1,"    "],[0,"\n    con"]],"start1":907,"start2":907,"length1":20,"length2":16},{"diffs":[[0,"ning');\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    var "]],"start1":936,"start2":936,"length1":21,"length2":17},{"diffs":[[0,"t.response;\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    if (mjpe"]],"start1":973,"start2":973,"length1":29,"length2":25},{"diffs":[[0," i++) {\n"],[-1,"            "],[0,"\n"],[1,""],[0,"        "]],"start1":1111,"start2":1111,"length1":29,"length2":17},{"diffs":[[0,"3];\n"],[-1,"            \n            "],[1,"\n"],[0,"\n   "]],"start1":1306,"start2":1306,"length1":33,"length2":9},{"diffs":[[0,"se;\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    "]],"start1":1905,"start2":1905,"length1":13,"length2":9},{"diffs":[[0,"  }\n};\n\n"],[1,""],[0,"request."]],"start1":2126,"start2":2126,"length1":16,"length2":16},{"diffs":[[0,"(null);\n"],[-1,"\n"]],"start1":2146,"start2":2146,"length1":9,"length2":8}]],"length":2154,"saved":false}
{"ts":1351879667230,"patch":[[{"diffs":[[0,"plete = "],[1,"Math.round("],[0,"(event.l"]],"start1":769,"start2":769,"length1":16,"length2":27},{"diffs":[[0,"l) * 100"],[1,")"],[0,";\n      "]],"start1":814,"start2":814,"length1":16,"length2":17}]],"length":2166,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351948414328,"patch":[[{"diffs":[[0,".response;\n\n"],[1,"    console.log(ab2str(mjpegBuffer));\n    /*\n"],[0,"    if (mjpe"]],"start1":986,"start2":986,"length1":24,"length2":69},{"diffs":[[0,"}\n    }\n"],[1,"    */\n"],[0,"};\n\nrequ"]],"start1":2179,"start2":2179,"length1":16,"length2":23},{"diffs":[[0,"(null);\n"],[1,"\nfunction ab2str(buf) {\n  return String.fromCharCode.apply(null, new Uint16Array(buf));\n}\n\nfunction str2ab(str) {\n  var buf = new ArrayBuffer(str.length*2); // 2 bytes for each char\n  var bufView = new Uint16Array(buf);\n  for (var i=0, strLen=str.length; i<strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n}\n"]],"start1":2210,"start2":2210,"length1":8,"length2":336}]],"length":2546,"saved":false}
{"ts":1351948424308,"patch":[[{"diffs":[[0,"(buf) {\n"],[1,"  "],[0,"  return"]],"start1":2234,"start2":2234,"length1":16,"length2":18},{"diffs":[[0,"(str) {\n"],[1,"  "],[0,"  var bu"]],"start1":2326,"start2":2326,"length1":16,"length2":18},{"diffs":[[0,"r.length"],[-1,"*"],[1," * "],[0,"2); // 2"]],"start1":2366,"start2":2366,"length1":17,"length2":19},{"diffs":[[0,"ch char\n"],[1,"  "],[0,"  var bu"]],"start1":2398,"start2":2398,"length1":16,"length2":18},{"diffs":[[0,"y(buf);\n"],[1,"  "],[0,"  for (v"]],"start1":2438,"start2":2438,"length1":16,"length2":18},{"diffs":[[0,"r (var i"],[-1,"="],[1," = "],[0,"0, strLe"]],"start1":2452,"start2":2452,"length1":17,"length2":19},{"diffs":[[0,", strLen"],[-1,"="],[1," = "],[0,"str.leng"]],"start1":2464,"start2":2464,"length1":17,"length2":19},{"diffs":[[0,"ength; i"],[-1,"<"],[1," < "],[0,"strLen; "]],"start1":2480,"start2":2480,"length1":17,"length2":19},{"diffs":[[0,") {\n    "],[1,"  "],[1,"  "],[0,"bufView["]],"start1":2502,"start2":2502,"length1":16,"length2":20},{"diffs":[[0,"t(i);\n  "],[-1,"}\n"],[1,"  }\n  "],[0,"  return"]],"start1":2540,"start2":2540,"length1":18,"length2":22}]],"length":2570,"saved":false}
{"ts":1351948596821,"patch":[[{"diffs":[[0,"nction a"],[-1,"b2str"],[1,"rrayBuffer2String(buf, callback) {\n    var bb = new BlobBuilder();\n    bb.append(buf);\n    var f = new FileReader();\n    f.onload = function(e) {\n        callback(e.target.result)\n    }\n    f.readAsText(bb.getBlob());\n}\n\n/*\nfunction arrayBuffer2String"],[0,"(buf) {\n"]],"start1":2221,"start2":2221,"length1":21,"length2":267},{"diffs":[[0," str"],[-1,"2ab"],[1,"ing2ArrayBuffer"],[0,"(str"]],"start1":2565,"start2":2565,"length1":11,"length2":23},{"diffs":[[0,"rn buf;\n"],[-1,""],[0,"}\n"],[1,"*/\n"]],"start1":2818,"start2":2818,"length1":10,"length2":13}]],"length":2831,"saved":false}
{"ts":1351948607987,"patch":[[{"diffs":[[0,".result)"],[1,";"],[0,"\n    }"],[1,";"],[0,"\n    f.r"]],"start1":2400,"start2":2400,"length1":22,"length2":24}]],"length":2833,"saved":false}
{"ts":1351948611289,"patch":[[{"diffs":[[0,"og(a"],[-1,"b2str"],[1,"rrayBuffer2String"],[0,"(mjp"]],"start1":1011,"start2":1011,"length1":13,"length2":25}]],"length":2845,"saved":false}
{"ts":1351948822163,"patch":[[{"diffs":[[0,"null);\n\n"],[1,"if (!window.BlobBuilder && window.WebKitBlobBuilder){\n    window.BlobBuilder = window.WebKitBlobBuilder;\n}\n\n"],[0,"function"]],"start1":2223,"start2":2223,"length1":16,"length2":124},{"diffs":[[0,"b = new "],[1,"window."],[0,"BlobBuil"]],"start1":2393,"start2":2393,"length1":16,"length2":23}]],"length":2960,"saved":false}
{"ts":1351948828642,"patch":[[{"diffs":[[0,"Builder)"],[1," "],[0,"{\n    wi"]],"start1":2275,"start2":2275,"length1":16,"length2":17}]],"length":2961,"saved":false}
{"ts":1351949273668,"patch":[[{"diffs":[[0,"null);\n\n"],[1,"/*\n"],[0,"if (!win"]],"start1":2223,"start2":2223,"length1":16,"length2":19},{"diffs":[[0,"b());\n}\n"],[-1,"\n/*"],[1,"*/\n"],[0,"\nfunctio"]],"start1":2574,"start2":2574,"length1":19,"length2":19},{"diffs":[[0,"turn buf;\n}\n"],[-1,"*/"],[0,"\n"]],"start1":2949,"start2":2949,"length1":15,"length2":13}]],"length":2962,"saved":false}
{"ts":1351949541812,"patch":[[{"diffs":[[0,");\n}\n*/\n"],[-1,"\n"],[0,"function"]],"start1":2577,"start2":2577,"length1":17,"length2":16},{"diffs":[[0,"    "],[-1,"return String.fromCharCode.apply(null, new Uint16Array(buf))"],[1,"var result = '';\n    if (buf) {\n        var bytes = new Uint8Array(buf);\n        for (var i = 0; i < bytes.byteLength; i++) {\n            result = result + String.fromCharCode(bytes[i]);\n        }\n    }\n    return result"],[0,";\n}\n"]],"start1":2620,"start2":2620,"length1":68,"length2":228}]],"length":3121,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351951803459,"patch":[[{"diffs":[[0,"t = '';\n"],[1,"    /*\n"],[0,"    if ("]],"start1":2633,"start2":2633,"length1":16,"length2":23},{"diffs":[[0,"   var b"],[-1,"ytes"],[1,"ufView"],[0," = new U"]],"start1":2668,"start2":2668,"length1":20,"length2":22},{"diffs":[[0,"w = new Uint"],[-1,"8"],[1,"16"],[0,"Array(buf);\n"]],"start1":2681,"start2":2681,"length1":25,"length2":26},{"diffs":[[0,"0; i < b"],[-1,"ytes"],[1,"ufView"],[0,".byteLen"]],"start1":2728,"start2":2728,"length1":20,"length2":22},{"diffs":[[0,"arCode(b"],[-1,"ytes"],[1,"ufView"],[0,"[i]);\n  "]],"start1":2805,"start2":2805,"length1":20,"length2":22},{"diffs":[[0,"    }\n    }\n"],[1,"    */\n"],[0,"    return r"]],"start1":2829,"start2":2829,"length1":24,"length2":31}]],"length":3142,"saved":false}
{"ts":1351951869501,"patch":[[{"diffs":[[0,"t = '';\n"],[-1,"    /*\n"],[0,"    if ("]],"start1":2633,"start2":2633,"length1":23,"length2":16},{"diffs":[[0,"}\n    }\n"],[-1,"    */\n"],[0,"    retu"]],"start1":2826,"start2":2826,"length1":23,"length2":16}]],"length":3128,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351952081496,"patch":[[{"diffs":[[0,"ar i = 0"],[-1,"; i <"],[1,", len ="],[0," bufView"]],"start1":2714,"start2":2714,"length1":21,"length2":23},{"diffs":[[0,"ength; i"],[-1,"++) {"],[1," < len; i++) {\n            console.log('Converting: ' + Math.round((i / len) * 100) + ' %');"],[0,"\n       "]],"start1":2743,"start2":2743,"length1":21,"length2":108}]],"length":3217,"saved":false}
{"ts":1351952093418,"patch":[[{"diffs":[[0,"lete + '"],[1," "],[0,"%');\n   "]],"start1":870,"start2":870,"length1":16,"length2":17}]],"length":3218,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351952268862,"patch":[[{"diffs":[[0,");\n\n"],[-1,"/*\nif (!window.BlobBuilder && window.WebKitBlobBuilder) {\n    window.BlobBuilder = window.WebKitBlobBuilder;\n}\n\nfunction arrayBuffer2String(buf, callback) {\n    var bb = new window.BlobBuilder();\n    bb.append(buf);\n    var f = new FileReader();\n    f.onload = function(e) {\n        callback(e.target.result);\n    };\n    f.readAsText(bb.getBlob());\n}\n*/\n"],[0,"func"]],"start1":2228,"start2":2228,"length1":362,"length2":8}]],"length":2864,"saved":false}
